# Dynamic Server Setup Script

This repository provides a powerful, reusable, and modular script to automate the setup of servers for hosting, mail, and DNS services. It supports ISPConfig, DKIM, SPF, and SSL configurations, and is ideal for setting up name servers (`ns1` and `ns2`).

---

## Features

- **Dynamic IP and Domain Configuration**: Supports dynamic user input or pre-configured settings via a configuration file.
- **Reusable Design**: Modularized with functions for selective task execution.
- **Automated ISPConfig Installation**: Simplifies the complex setup of ISPConfig.
- **Name Server Setup**: Configures `ns1` and `ns2` for your domain.
- **Email Server Integration**: Includes Postfix, DKIM, and SPF for secure email services.
- **Optional SSL Installation**: Easily add Let's Encrypt SSL for secure connections.
- **Error Handling**: Checks and validates files, folders, and configurations to avoid redundancy.

---

## Quick Start

### 1. Clone the Repository

```bash
git clone https://github.com/raketbizdev/ispconfig-dns-setup.git
cd ispconfig-dns-setup
```

---

### 2. Run the Script

Run the setup script directly from the repository:

```bash
curl -O https://raw.githubusercontent.com/raketbizdev/ispconfig-dns-setup/main/setup_server.sh
chmod +x setup_server.sh
sudo ./setup_server.sh
```

---

## DNS Records

### Required DNS Records

| Type  | Name             | Value                       |
|-------|------------------|-----------------------------|
| A     | `@`              | `<your_server_ip>`          |
| A     | `ns1`            | `<your_server_ip>`          |
| A     | `ns2`            | `<your_server_ip>`          |
| A     | `mail`           | `<your_server_ip>`          |
| MX    | `@`              | `mail.<your_domain>`         |
| TXT   | `@`              | `v=spf1 a mx ip4:<your_server_ip> ~all` |
| TXT   | `mail._domainkey`| DKIM public key (generated by the script) |

---

## Post-Setup Verification

1. **Verify DNS Configuration**:
   Use [MXToolbox](https://mxtoolbox.com/) or `dig` to check DNS propagation.
   ```bash
   dig ns <your_domain>
   ```

2. **Test Email Deliverability**:
   Send test emails to confirm DKIM, SPF, and MX records are configured correctly.

3. **Access ISPConfig**:
   Log in at:
   ```plaintext
   https://server.<your_domain>:8080
   ```

---

## Troubleshooting

- **Log Files**:
  - Postfix: `/var/log/mail.log`
  - Bind9: `/var/log/syslog`
  - ISPConfig: `/var/log/ispconfig`

- **Common Issues**:
  - **DNS Propagation**: DNS changes can take up to 24 hours to propagate.
  - **DKIM/DMARC Failures**: Ensure TXT records are correctly configured.

---

## License

This project is licensed under the MIT License. See the `LICENSE` file for details.

---

## Contributing

Feel free to fork this repository and submit pull requests for improvements. Contributions are always welcome!

---

## Contact

For issues or suggestions, please open an issue in the repository or contact the project maintainer.
